---
layout: post
title: Script d'installation du JDK 5 sur MacOSX Lion et Mountain Lion (Mis à jour)
date: 2012-07-30 00:17:40.000000000 +02:00
type: post
published: true
status: publish
categories:
- code
tags:
- j2se 5.0
- java5
- jdk5
- lion
- macosx
- mountain lion
meta:
  _syntaxhighlighter_encoded: '1'
  _edit_last: '1'
  _su_rich_snippet_type: none
  amazon-product-excerpt-hook-override: '3'
  amazon-product-content-hook-override: '2'
  amazon-product-newwindow: '3'
author:
  login: brice
  email: brice.dutheil@gmail.com
  display_name: Brice Dutheil
  first_name: Brice
  last_name: Dutheil
---
<p><strong>MAJ 29/07/2012</strong>: Le script a été mis à jour pour fonctionner avec Mac OS X Mountain Lion. Le script a été mis à jour pour télécharger lui même le DMG chez Apple, en bref il n'y a plus qu'à commencer à l'étape 2.</p>
<p><a href="http://www.blog2.arkey.fr/wp-content/uploads/2011/08/jdk5_install_mountain_lion.png"><img class=" wp-image-357    alignnone" title="jdk5_install_mountain_lion" src="{{ site.baseurl }}/assets/jdk5_install_mountain_lion.png" alt="JDK 5 installation on Mountain Lion" width="542" height="355" /></a></p>
<hr />
<p><strong>Original 22/08/2011</strong> : Avec l'arrivée de Lion, Apple change les choses avec Java. Heureusement s'il s'agit d'une mise à jour depuis Snow Leopard, vous ne perdrez pas votre runtime JDK 6, en revanche si vous faites une installation clean, et bien il faudra télécharger le runtime ici :</p>
<blockquote><p><a title="Java 6 Runtime pour Lion" href="http://support.apple.com/kb/DL1421">http://support.apple.com/kb/DL1421</a></p></blockquote>
<p>Bon ça fait une chose de plus pour nous ennuyer, mais bon comme toujours pour ceux qui veulent bosser sur un JDK 1.5, il vous faudra tricher un peu plus, il n'y a pas de mise à jour standard ou facile pour installer le JDK 5 sur 10.7.</p>
<p>Certains ont trouvé l'astuce en téléchargeant la mise à jour Java pour Mac OS X 10.5, et avec quelques outils et commandes dans le terminal. Cela dit le processus est un poil long. Du coup je me suis codé un petit script pour automatiser ces étapes. Pour l'instant le script repose sur un téléchargement manuel de cette mise à jour.</p>
<ol>
<li>En premier on télécharge la mise à jour du JDK5 ici :<br />
<blockquote><p><a title="Mise à jour Java pour Leopard" href="http://support.apple.com/kb/DL1359">http://support.apple.com/kb/DL1359</a></p></blockquote>
</li>
<li>Ensuite dans le même répertoire on y téléchargera le <strong><a title="Script d'install du JDK 5 sur Lion" href="https://gist.github.com/raw/1163008/146a0e1378f3daf8ab7d5e981530764e64ca770b/install_jdk5_lion.sh">script</a></strong></li>
<li>Dans un terminal dans le dossier du téléchargement<br />
[plain]chmod +x install_jdk5_lion.sh[/plain]</li>
<li>Il faut être <strong>root</strong>, attention quand même, le script fonctionne sur les environnements Lion que j'ai pu testé, mais il peut très bien casser votre système, déclencher un tempête ou je ne sais quoi encore... je ne garantis rien.<br />
[plain]sudo -s[/plain]</li>
<li>Bref il se lance comme ça :<br />
[plain]./install_jdk5_lion.sh[/plain]</li>
<li>Si tout se passe bien alors, les préférences Java de Mac s'ouvriront en listant le JDK 5.</li>
<li>exit</li>
</ol>
<p>En images, ça donne :</p>
<p><a href="http://www.blog2.arkey.fr/wp-content/uploads/2011/08/jdk5_lion_install_terminal.png"><img class="alignnone size-full wp-image-279" title="jdk5_lion_install_terminal" src="{{ site.baseurl }}/assets/jdk5_lion_install_terminal.png" alt="" width="593" height="399" /></a></p>
<p><a href="http://www.blog2.arkey.fr/wp-content/uploads/2011/08/lion_java_preferences.png"><img class="alignnone size-full wp-image-280" title="lion_java_preferences" src="{{ site.baseurl }}/assets/lion_java_preferences.png" alt="" width="577" height="402" /></a></p>
<p>Evidement si vous repérez une coquille, je suis à l'écoute. Bonne soirée :)</p>
<p><strong>EDIT 29/08/2011</strong>: Tant qu'à faire autant montrer comment avoir plusieurs JDK dans IntelliJ sous macosx.</p>
<ol>
<li>Donc une fois le projet ouvert, il faut aller dans les préférences du projet (Project Settings).<br />
<a href="http://www.blog2.arkey.fr/wp-content/uploads/2011/08/project_setting-e1314642274278.png"><img class="alignnone size-full wp-image-289" title="project_setting" src="{{ site.baseurl }}/assets/project_setting-e1314642274278.png" alt="IntelliJ Project Setting" width="496" height="327" /></a></li>
<li>Ensuite ajouter le JSDK.<br />
<a href="http://www.blog2.arkey.fr/wp-content/uploads/2011/08/add_new_jsdk.png"><img class="alignnone size-full wp-image-290" title="add_new_jsdk" src="{{ site.baseurl }}/assets/add_new_jsdk.png" alt="Add New JSDK" width="190" height="211" /></a></li>
<li>Puis sélectionner dans l'explorateur le dossier /System/Library/Java/JavaVirtualMachines/1.5.0/Contents/Home<br />
<a href="http://www.blog2.arkey.fr/wp-content/uploads/2011/08/choose_jdk5_home.png"><img class="alignnone size-full wp-image-291" style="border-style: initial; border-color: initial;" title="choose_jdk5_home" src="{{ site.baseurl }}/assets/choose_jdk5_home-e1314642723756.png" alt="Choose JDK 5 Home" width="496" height="236" /></a></li>
<li>Hop, c'est fini, dans IntelliJ vous avez le JDK 5<br />
<a href="http://www.blog2.arkey.fr/wp-content/uploads/2011/08/intellij_found_it.png"><img class="alignnone size-full wp-image-292" title="intellij_found_it" src="{{ site.baseurl }}/assets/intellij_found_it-e1314642860664.png" alt="" width="496" height="325" /></a></li>
</ol>
<p>Idée originale : <a href="http://www.s-seven.net/zend_5x_lion">Zend Studio <em>5</em>.x for OS X <em>Lion</em> (<em>Java</em> SE 6)</a></p>
<p>Sources :<br />
<script type="text/javascript" src="https://gist.github.com/1163008.js"></script></p>
